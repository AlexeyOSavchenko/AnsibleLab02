---
- name: playbook create users l2e1
  hosts: node1.example.com
  no_log: True
  tasks:
  - name: create_users
    ansible.builtin.user:
      name: "{{ item.name }}"
      state: present
      comment: "{{ item.name }}@example.com"
      create_home: yes
      password: "{{ item.pass | string | password_hash('sha512')}}"
      update_password: on_create
    loop:
      - name: alice
        pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39313638363566633036326435626262623063393230326134333330616164373932303664353531
          6662393064393833616465643334333465376261636665380a386638383465343964626531646337
          63646161353134313664336336653138633839386530313231376339373564666333383633346431
          6634323766376130380a613835386532663739313535666665393364663761393261616334643365
          3735
      - name: bob
        pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32353834343736323430656462396638666334656361666565653032663263666438643733303634
          3838643938656261666666333133646532366163383337390a616135623638336661343730626261
          39366234356364636265353531303830343434366634633864323264323532616433303032396330
          6239356533303061340a336330613934643766346463613361336336396532323065343164653932
          3562
      - name: carol
        pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36383031383663626339663366643637386461323162363533306636336236666161373836353765
          6335666361323332633766653634666435613234373836310a353536333661323463633636636663
          38663131353534386530393835383030366537623063396637323833313337333362373133326138
          6466616630663064360a313535323664353164633333646261373238326437346663393565626533
          3738
...